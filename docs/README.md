# Документация

## Конфигурация сервера

Вся конфигурация выполняется в одном файле: `serverConfig.py`

### Объяснение назначения переменных

+ `SERVER_ON_PORT` - порт, на котором работает сервер. Обычно применяется, когда сервер переходит на TLS/SSL;
+ `USE_SSL` - включает поддержку SSL;
    + Если используется SSL, требуется указать:
        + `SSL_KEYFILE` - путь до файла ключей сертификата;
        + `SSL_CERTFILE` - путь до самого сертификата;

## Задаем расположения публикуемых файлов

+ siteDirectory - переменная пути до файлов сервера-сайта. Все указанные пути к файлам в словарях ниже будут ссылаться на файлы в этой папке;
+ siteErrorPages - словарь с путями к HTML страницам HTTP ошибок. Имеет следующий вид:

```python
{
    "<код HTTP ошибки>": ("<MIME тип содержимого>", "<путь до HTML файла>")
}
```

+ sitePages - словарь с путями до файлов.

```python
{
    "<HTTP метод>": {
        "<URL>": ("<тип представления>", *<аргументы>)
    }
}
```

+ Если тип `file` - `"<MIME тип содержимого>", "<путь до локального файла>"`
+ Если тип `redirection` - `"<адрес в сети или URL>"`
+ Если тип `function` - `"<функция обработки запроса>"`

Подробное объяснение представлено ниже.

### Добавление файлов

Здесь все довольно просто. В словарь `sitePages`, в словарь метода `GET` требуется добавить элемент, в кортеже указать тип представления как `file`, указать MIME-тип файла и путь до локального файла.

### Создание редиректов (перенаправлений)

Создание редиректов еще проще. Делаем все тоже самое что и с файлами, только тип представления будет `redirection` и стоит только указать путь до файла/страницы/сайта как аргументы.

### Добавление функций

Свои функции обработки запроса следует размещать в файле `view.py` (можно и в других, тогда следует сделать импортирование модуля в `serverConfig.py`).

Пример:

```python
# view.py
from pageEngine import generateHTTPAnswer


def about():
    # Можно добавить два аргумента в функцию и получить запросы HEAD и BODY
    send_data = "<h1>About</h1>".encode()  # Данные обязательно должны конвертированы в строке байтов

    return generateHTTPAnswer(content_type="text/html", data=send_data)
```

Далее в файл `serverConfig.py`, в словарь `siteMap`, должна быть помещена строка в соответствии с методом (GET, POST и др.), который вы хотите использовать:

```python
# serverConfig.py
import view
...
siteMap = {
    "GET": {
        ...
        "/about": ("function", view.about)
    }
    ...
}
```

После перезапуска сервера, появится новая страница по адресу `/about`.
